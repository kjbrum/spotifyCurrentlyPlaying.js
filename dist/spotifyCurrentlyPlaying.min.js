/**
 *
 *  -----------------------------------
 *  spotifyCurrentlyPlaying.js - v0.3.2
 *  -----------------------------------
 *
 *  Display your currently playing Spotify song(s) using Last.fm scrobbling.
 *
 *  https://github.com/kjbrum/spotifyCurrentlyPlaying.js
 *  @license Copyright (c) Kyle Brumm <http://kylebrumm.com>
 *
 */
!function(t){var e=function(t){return new e.a(t)};e.prototype={b:function(){var t=this;if(!this.c)throw"Missing selector";t.d(function(){t.e(function(){var e=t.c;if("string"==typeof t.c&&(e=document.f(t.c)),t.g.length>0||t.h.length>0){var n="",o=document.i("iframe");o.j=t.j,o.k=t.k,o.l=0,o.m("allowtransparency","true"),t.g.length>0?t.g.length>1?(n+="spotify:trackset:Recently+Played:",t.g.forEach(function(t,e,o){var r=o[e].split(":");n+=r[2],e+1!==o.length&&(n+=",")})):n=t.g[0]:t.h.length>1?(n+="spotify:trackset:Recently+Played:",t.h.forEach(function(t,e,o){n+=o[e],e+1!==o.length&&(n+=",")})):n=t.h[0],o.n="https://embed.spotify.com/?uri="+n+"&theme="+t.o+"&view="+t.p,e.q(o)}else{var r=document.i("p"),i=document.r("No track found.");r.q(i),e.q(r)}})})},d:function(t){var e=this,n="http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+this.s+"&api_key="+this.t+"&limit="+e.u+"&format=json",o=new XMLHttpRequest;o.v("GET",n,!0),o.w=function(){var n=JSON.parse(o.x),r=n.z.y;if(!(o.A>=200&&o.A<400))throw n.message;r.length>0&&(r[0]?r.forEach(function(t,n,o){e.B[n]={C:o[n].name,D:o[n].D.F,G:o[n].G.F}}):e.B.push({C:r.name,D:r.D.F,G:r.G.F})),t()},o.H=function(){throw"connection error"},o.I()},e:function(t){var e=this,n=e.B,o=1;n.length>0?n.forEach(function(n,r,i){var c="";for(var a in n)n.hasOwnProperty(a)&&n[a]&&(c+=a+":"+n[a]+" ");var s="https://api.spotify.com/v1/search?query="+encodeURIComponent(c)+"&offset=0&limit=1&type=track",h=new XMLHttpRequest;h.v("GET",s,!0),h.w=function(){var n=JSON.parse(h.x);if(!(h.A>=200&&h.A<400))throw n.message;n.K.J[0]&&(e.g[r]=n.K.J[0].L),++o===i.length&&(e.g=e.g.filter(function(t){return t}),t())},h.H=function(){throw"connection error"},h.I()}):t()}},e.a=function(t){var e=this;e.c=t.c||".scp-container",e.s=t.s||"",e.t=t.t||"",e.j=t.j||300,e.k=t.k||400,e.o=t.o||"black",e.p=t.p||"list",e.u=parseInt(t.u)||1,e.h=t.h||[],e.g=[],e.B=[],e.b()},e.a.prototype=e.prototype,t.M=t.N=e}(window);